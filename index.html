<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pyko</title>
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="css/variables.css" />
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link rel="stylesheet" href="css/sections.css" />
    <link rel="stylesheet" href="css/media.css" />
  </head>
  <body>
    <div class="mobile-menu">
      <div class="mobile-menu-container">
        <div class="mobile-menu-label">menu</div>
        <ul class="mobile-menu-list">
          <a href="#" class="mobile-menu-item-link">
            <span>0.1 /</span> Home Page
          </a>
          <a href="#" class="mobile-menu-item-link">
            <span>0.2 /</span> About
          </a>
          <a href="#" class="mobile-menu-item-link">
            <span>0.3 /</span> Careers
          </a>
          <a href="#" class="mobile-menu-item-link">
            <span>0.4 /</span> Pricing
          </a>
        </ul>
        <div class="mobile-menu-socials">
          <a href="#" class="mobile-menu-social-link button-blur">
            <img src="images/icons/inst.svg" alt="Instagram" />
          </a>
          <a href="#" class="mobile-menu-social-link button-blur">
            <img src="images/icons/x.svg" alt="Twitter" />
          </a>
          <a href="#" class="mobile-menu-social-link button-blur">
            <img src="images/icons/in.svg" alt="LinkedIn" />
          </a>
          <a href="#" class="mobile-menu-social-link button-blur">
            <img src="images/icons/yt.svg" alt="YouTube" />
          </a>
        </div>
      </div>
    </div>
    <header class="header">
      <div class="header-container">
        <div class="header-logo">
          <svg
            width="87"
            height="35"
            viewBox="0 0 87 35"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_2_456)">
              <path
                d="M38.247 8.5344C37.2233 8.00499 36.0598 7.73993 34.758 7.73993H27.2337C27.0727 7.73993 26.9421 7.87033 26.9421 8.03121V26.9681C26.9421 27.129 27.0727 27.2594 27.2337 27.2594H29.7203C29.882 27.2594 30.0126 27.129 30.0126 26.9681V20.3289C30.0126 20.1673 30.1431 20.0369 30.3049 20.0369H34.7587C36.0796 20.0369 37.2474 19.7718 38.2619 19.2424C39.2756 18.713 40.0624 17.983 40.6207 17.0532C41.1791 16.1241 41.4579 15.0829 41.4579 13.9299C41.4579 12.7768 41.1791 11.6988 40.6207 10.7513C40.0624 9.803 39.2714 9.06381 38.2477 8.5344M37.8561 15.6173C37.5581 16.129 37.1395 16.533 36.5997 16.8306C36.0598 17.1283 35.4454 17.2771 34.7573 17.2771H30.3034C30.1424 17.2771 30.0112 17.1467 30.0112 16.9851V10.7924C30.0112 10.6308 30.1417 10.5004 30.3034 10.5004H34.7573C35.4454 10.5004 36.0591 10.645 36.5997 10.9327C37.1388 11.2211 37.5574 11.6258 37.8561 12.146C38.1533 12.6669 38.303 13.2431 38.303 13.8753C38.303 14.5075 38.154 15.107 37.8561 15.618"
                fill="white"
              />
              <path
                d="M49.5749 25.6037L45.6184 13.2132C45.5801 13.0927 45.4672 13.0105 45.3403 13.0105H42.8062C42.6061 13.0105 42.4656 13.2068 42.5295 13.396L47.1607 27.0622C47.2011 27.1806 47.3125 27.26 47.4373 27.26H49.1648C49.3649 27.26 49.5061 27.4563 49.4415 27.6462L47.8055 32.4513C47.741 32.6405 47.8822 32.8376 48.0822 32.8376H50.4517C50.5773 32.8376 50.6887 32.7575 50.7284 32.6391L57.2304 13.396C57.2942 13.2068 57.1538 13.0112 56.9537 13.0112H54.5842C54.4586 13.0112 54.3472 13.0913 54.3075 13.2104L50.1296 25.6094C50.0396 25.8765 49.66 25.8737 49.5742 25.6051"
                fill="white"
              />
              <path
                d="M86.0093 16.3838C85.3488 15.2499 84.4414 14.3583 83.2879 13.707C82.1336 13.0564 80.8496 12.7311 79.4357 12.7311C78.0218 12.7311 76.737 13.0564 75.5834 13.707C74.4292 14.3583 73.5218 15.2506 72.8621 16.3838C72.2016 17.5185 71.871 18.7729 71.871 20.1485C71.871 21.5241 72.2009 22.7743 72.8621 23.899C73.5218 25.0245 74.4292 25.9118 75.5834 26.5624C76.737 27.213 78.021 27.5383 79.4357 27.5383C80.8503 27.5383 82.1336 27.213 83.2879 26.5624C84.4414 25.9118 85.3488 25.0245 86.0093 23.899C86.6698 22.7743 87.0004 21.5248 87.0004 20.1485C87.0004 18.7722 86.6698 17.5178 86.0093 16.3838ZM83.3858 22.5468C82.9857 23.2718 82.4408 23.8395 81.7527 24.2477C81.0638 24.6567 80.2912 24.8615 79.4357 24.8615C78.5801 24.8615 77.8068 24.6574 77.1187 24.2477C76.4305 23.8388 75.8857 23.2718 75.4855 22.5468C75.0854 21.8218 74.8854 21.0224 74.8854 20.1485C74.8854 19.2747 75.0854 18.4752 75.4855 17.7502C75.8857 17.0252 76.4298 16.4582 77.1187 16.0493C77.8068 15.6404 78.5794 15.4363 79.4357 15.4363C80.2919 15.4363 81.0638 15.6411 81.7527 16.0493C82.4408 16.4582 82.985 17.0252 83.3858 17.7502C83.7852 18.4752 83.986 19.2747 83.986 20.1485C83.986 21.0224 83.7859 21.8218 83.3858 22.5468Z"
                fill="white"
              />
              <path
                d="M67.6583 13.0105H70.5464C70.8011 13.0105 70.9338 13.3131 70.7607 13.5002L65.8876 18.7745C65.7897 18.8801 65.784 19.041 65.8734 19.1537L71.927 26.7873C72.0788 26.9786 71.9426 27.26 71.6986 27.26H68.731C68.6416 27.26 68.5572 27.2189 68.5018 27.1494L62.2269 19.2274C62.1382 19.1154 62.1439 18.9566 62.2397 18.8503L67.4419 13.1062C67.4973 13.0452 67.576 13.0105 67.6583 13.0105Z"
                fill="white"
              />
              <path
                d="M61.2064 27.2601H58.8596C58.6985 27.2601 58.568 27.1297 58.568 26.9688V6.91634C58.568 6.75546 58.6985 6.62506 58.8596 6.62506H61.2064C61.3681 6.62506 61.498 6.75546 61.498 6.91634V26.9688C61.498 27.1297 61.3674 27.2601 61.2064 27.2601Z"
                fill="white"
              />
              <path
                d="M2.02189 0.0800931L7.89174 2.03473C8.51888 2.24381 8.9417 2.82992 8.9417 3.49044V31.5096C8.9417 32.1701 8.51888 32.7562 7.89174 32.9653L2.02189 34.9199C1.02726 35.2516 0 34.5117 0 33.4642V1.5358C0 0.488314 1.02655 -0.251586 2.02189 0.0800931Z"
                fill="white"
              />
              <path
                d="M10.1626 11.6435V4.91922C10.1626 3.87174 11.1899 3.13255 12.1845 3.46352L18.0543 5.41745C18.6815 5.62652 19.105 6.21263 19.105 6.87315V11.6428C19.105 12.4904 18.4169 13.1772 17.5691 13.1772H11.6992C10.8507 13.1772 10.1633 12.4897 10.1633 11.6428"
                fill="white"
              />
              <path
                d="M11.6986 14.3973H17.5685C18.417 14.3973 19.1044 15.0848 19.1044 15.9317V20.7028C19.1044 21.3633 18.6809 21.9494 18.0538 22.1585L12.1846 24.1131C11.19 24.4441 10.1627 23.7049 10.1627 22.6574V15.9317C10.1627 15.0841 10.8509 14.3973 11.6986 14.3973Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_2_456">
                <rect width="87" height="35" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </div>
        <menu class="header-menu">
          <a href="#" class="header-menu-item-link"> Home Page </a>
          <a href="#" class="header-menu-item-link"> About </a>
          <a href="#" class="header-menu-item-link"> Careers </a>
          <a href="#" class="header-menu-item-link"> Pricing </a>
        </menu>
        <div class="header-buttons">
          <a href="#" class="link secondary">Login</a>
          <button class="button primary">Get started</button>
          <div class="header-burger">
            <div class="header-burger-line"></div>
            <div class="header-burger-line"></div>
            <div class="header-burger-line-x"></div>
            <div class="header-burger-line-x"></div>
          </div>
        </div>
      </div>
    </header>
    <section class="section hero">
      <div class="container">
        <div
          class="section-text section-text-t-center section-text-align-center section-text-justify-center section-text-flex section-text-col"
        >
          <label class="section-label"
            >For the students who refuse to be average.</label
          >
          <h1 class="section-title h1 desktop-only">
            Become the most aware <br />
            <span class="serif">version of yourself</span>
          </h1>
          <h1 class="section-title h1 mobile-only">
            Become the most aware
            <span class="serif"
              >version <br />
              of yourself</span
            >
          </h1>
          <p class="body-txt mobile-only">
            There are two kinds of students: those who react, and those who
            predict. Pyko gives you foresight, real-time insight, adaptive
            analytics, and intelligenc.
          </p>
          <button class="button primary with-arrow">
            Get Started
            <div class="arrow">
              <img src="images/icons/btn-arrow-white.svg" alt="Arrow" />
            </div>
          </button>
        </div>
        <div class="hero-footer">
          <div class="hero-footer-left">
            <p class="body-txt body-txt-18">
              There are two kinds of students: those who react, and those who
              predict. Pyko gives you foresight, real-time insight, adaptive
              analytics, and intelligenc.
            </p>
            <a href="" class="link">Learn more</a>
          </div>
          <div class="hero-footer-right">
            <div class="scroll-to-icon">
              <img src="images/icons/star.svg" alt="" />
            </div>
            <div class="scroll-to-text">Scroll to explore</div>
          </div>
        </div>
        <div class="hero-cards-wrapper">
          <div class="hero-main-card">
            <img
              src="images/temp/hero-main-card-img.png"
              alt="Hero Main Card Image"
              class="hero-main-card-img"
            />
            <div class="hero-main-card-content">
              <p class="card-title-28">Predictive Analysis</p>
              <div class="bordered-line"></div>
              <div class="progress-content">
                <label class="progress-label">Current grade</label>
                <input
                  class="progress-input green"
                  type="range"
                  min="0"
                  max="100"
                  value="50"
                />
              </div>
              <div class="progress-content">
                <label class="progress-label">Assignments</label>
                <input
                  class="progress-input orange"
                  type="range"
                  min="0"
                  max="100"
                  value="80"
                />
              </div>
            </div>
          </div>
          <div class="hero-card-left">
            <div>You will never see yourself the same way again</div>
            <div>You will never see yourself the same way again</div>
          </div>
          <div class="hero-card-right">
            <div class="hero-card-right-content">
              <div class="hero-card-right-content-text">
                <span class="gsap-percentage">40.0%</span>
                <label class="gsap-label">Average Grade</label>
              </div>
              <img src="images/icons/info-circle.svg" alt="Icon" class="icon" />
            </div>
            <button class="button secondary with-arrow">
              Explore the suite
              <div class="arrow">
                <img src="images/icons/btn-arrow-white.svg" alt="Arrow" />
              </div>
            </button>
          </div>
        </div>
      </div>
    </section>
    <section class="section about">
      <div class="container">
        <div
          class="section-text section-text-t-center section-text-align-center section-text-justify-center section-text-flex section-text-col"
        >
          <label class="section-label"> about us </label>
          <h2 class="section-title h2">
            Awareness is
            <span class="serif serif-60">your competitive edge.</span>
          </h2>
          <p class="body-txt body-txt-18">
            Most students chase performance. Few understand what drives it. Pyko
            turns awareness into intelligence — revealing the hidden patterns
            behind your focus, habits, and energy.When you see what truly drives
            results, you stop reacting — and start leading.
          </p>
          <button class="button primary with-arrow">
            Get Started
            <div class="arrow">
              <img src="images/icons/btn-arrow-white.svg" alt="Arrow" />
            </div>
          </button>
        </div>
      </div>
    </section>
    <section class="section predict">
      <div class="container">
        <div
          class="section-text section-text-t-center section-text-align-center section-text-justify-center section-text-flex section-text-col"
        >
          <label class="section-label"> Operate With Intent </label>
          <h2 class="section-title h2">
            See your next result
            <br />
            <span class="serif serif-60">before you reach it.</span>
          </h2>
          <p class="body-txt body-txt-18">
            Most students react after results. Pyko predicts them before they
            happen — analyzing your grades, focus, and habits to reveal what’s
            next. You see shifts early and act with intention, not guesswork.
          </p>
        </div>
        <div class="predict-cards-wrapper">
          <div class="predict-card">
            <div class="predict-card-content">
              <div class="predict-card-graph">
                <div class="predict-card-blured">
                  <div class="pc-blured-header">
                    <div class="pc-blured-header-text">
                      <span>Predicted GPA</span>
                      <span>3.8</span>
                      <span>Based on current performance trends</span>
                    </div>
                    <div class="pc-blured-header-label"></div>
                  </div>
                  <div class="pc-blured-chart-module">
                    <div class="chart">
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                      <div class="chart-line"><div></div></div>
                    </div>
                    <div class="labels">
                      <span>w1</span><span>w2</span><span>w3</span
                      ><span>w4</span><span>w5</span><span>w6</span
                      ><span>w7</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="predict-card-content-text">
                <p class="predict-card-title card-title card-title-32">
                  Predicted GPA
                </p>
                <p class="predict-card-subtitle body-txt">
                  Your predicted GPA reflects how consistent focus and study
                  rhythm influence long-term results.
                </p>
              </div>
            </div>
          </div>
          <div class="predict-card">
            <div class="predict-card-content">
              <div class="predict-card-graph">
                <div class="predict-card-secondary">
                  <div class="pc-secondary-add">
                    <div class="icon">
                      <img src="images/icons/bolt.svg" alt="Icon" />
                    </div>

                    <span
                      >78%
                      <img src="images/icons/curved-arrow.svg" alt="Icon" />
                    </span>
                    <span>Focus Stability</span>
                  </div>
                  <div class="pc-secondary-main">
                    <div class="pc-secondary-main-header">
                      <span> Next Focus Peak </span>
                      <div class="percent">
                        <span> 25% </span>
                        <img
                          src="images/icons/percent-arrow-up.svg"
                          alt=""
                          class="percent-arrow"
                        />
                      </div>
                    </div>
                    <div class="pc-secondary-main-chart">
                      <svg
                        width="220"
                        height="125"
                        viewBox="0 0 220 125"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                        class="chart-svg"
                      >
                        <path
                          d="M12.0534 77.4591L1.19434 63.1632V101.5C1.19434 114.203 11.4918 124.5 24.1943 124.5H210.194C215.441 124.5 219.694 120.247 219.694 115V45.5L217.153 46.3698C212.653 47.9105 208.823 50.959 206.311 54.9993C197.753 68.7678 177.389 67.7436 170.256 53.1858L162.028 36.3951C154.171 20.3592 135.57 20.9149 131.053 38.1917C124.808 62.0764 118.333 86.636 105.599 86.636C94.2753 86.636 86.1249 80.2264 77.8217 72.5733C68.6619 64.1307 54.9278 66.1466 47.952 76.4674C39.4808 89.0005 21.2036 89.5054 12.0534 77.4591Z"
                          fill="url(#paint0_linear_52_16)"
                        />
                        <path
                          class="chart-line-path"
                          d="M1.19434 63.1632L12.0534 77.4591C21.2036 89.5054 39.4808 89.0005 47.952 76.4674C54.9278 66.1466 68.6619 64.1307 77.8217 72.5733C86.1249 80.2264 94.2753 86.636 105.599 86.636C118.333 86.636 124.808 62.0764 131.053 38.1917C135.57 20.9149 154.171 20.3592 162.028 36.3951L168.377 49.3521C176.328 65.5784 199.026 66.72 208.565 51.3734L210.194 48.7521"
                          stroke="url(#paint1_linear_52_16)"
                          stroke-width="3"
                        />
                        <circle
                          class="chart-circle"
                          cx="133.194"
                          cy="33"
                          r="4"
                          fill="#97CD06"
                          stroke="white"
                          stroke-width="2"
                        />
                        <defs>
                          <linearGradient
                            id="paint0_linear_52_16"
                            x1="133.194"
                            y1="7"
                            x2="159.694"
                            y2="96.5"
                            gradientUnits="userSpaceOnUse"
                          >
                            <stop stop-color="#97CD06" />
                            <stop
                              offset="1"
                              stop-color="white"
                              stop-opacity="0"
                            />
                          </linearGradient>
                          <linearGradient
                            id="paint1_linear_52_16"
                            x1="210.194"
                            y1="53.7741"
                            x2="-0.597442"
                            y2="84.6437"
                            gradientUnits="userSpaceOnUse"
                          >
                            <stop stop-color="white" stop-opacity="0" />
                            <stop offset="0.111506" stop-color="#97CD06" />
                            <stop offset="0.858819" stop-color="#97CD06" />
                            <stop
                              offset="1"
                              stop-color="white"
                              stop-opacity="0"
                            />
                          </linearGradient>
                        </defs>
                      </svg>
                    </div>
                    <div class="pc-secondary-main-footer">
                      Predicted productivity dip within the next 48 hours.
                    </div>
                  </div>
                </div>
              </div>
              <div class="predict-card-content-text">
                <div class="predict-card-title card-title card-title-32">
                  Next Focus Drop
                </div>
                <p class="predict-card-subtitle body-txt">
                  Pyko forecasts your upcoming focus dips using real-time
                  attention and activity data.
                </p>
              </div>
            </div>
          </div>
          <div class="predict-card">
            <div class="predict-card-content">
              <div class="predict-card-graph">
                <div class="predict-card-blured"></div>
              </div>
              <div class="predict-card-content-text">
                <p class="predict-card-title card-title card-title-32">
                  Stability Forecast
                </p>
                <p class="predict-card-subtitle body-txt">
                  This index measures how stable your learning rhythm has been
                  over the past week.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script>
      // Функция для обновления прогресс-бара
      function updateProgressBar(input) {
        const value = parseFloat(input.value)
        const min = parseFloat(input.min) || 0
        const max = parseFloat(input.max) || 100
        const percentage = ((value - min) / (max - min)) * 100

        // Обновляем CSS переменную для ширины заполнения
        input.style.setProperty('--progress-width', `${percentage}%`)

        // Выводим значение в консоль для отслеживания
        const label = input.previousElementSibling?.textContent || 'Progress'
        console.log(`${label}: ${value} (${percentage.toFixed(1)}%)`)

        // Можно также вернуть объект с данными для дальнейшего использования
        return {
          value: value,
          percentage: percentage,
          label: label,
        }
      }

      // Инициализация всех progress bars
      document.addEventListener('DOMContentLoaded', function () {
        const progressInputs = document.querySelectorAll('.progress-input')

        progressInputs.forEach((input) => {
          // Инициализация при загрузке
          updateProgressBar(input)

          // Отслеживание изменений при движении ползунка
          input.addEventListener('input', function () {
            updateProgressBar(this)
          })

          // Отслеживание изменения размера (для адаптивности)
          const resizeObserver = new ResizeObserver(() => {
            updateProgressBar(input)
          })
          resizeObserver.observe(input)
        })
      })

      // Параллакс эффект для карточек с отслеживанием курсора
      document.addEventListener('DOMContentLoaded', function () {
        const heroSection = document.querySelector('.hero')
        const mainCard = document.querySelector('.hero-main-card')
        const leftCard = document.querySelector('.hero-card-left')
        const rightCard = document.querySelector('.hero-card-right')

        if (!heroSection || !mainCard || !leftCard || !rightCard) return

        let mouseX = 0
        let mouseY = 0
        let cardX = 0
        let cardY = 0
        let targetX = 0
        let targetY = 0
        let isMouseInside = false

        // Отслеживание движения курсора
        heroSection.addEventListener('mousemove', (e) => {
          const rect = heroSection.getBoundingClientRect()
          targetX = ((e.clientX - rect.left) / rect.width) * 2 - 1 // -1 до 1
          targetY = ((e.clientY - rect.top) / rect.height) * 2 - 1 // -1 до 1
          isMouseInside = true
        })

        // Сброс при уходе курсора
        heroSection.addEventListener('mouseleave', () => {
          targetX = 0
          targetY = 0
          isMouseInside = false
        })

        // Анимация карточек с плавной интерполяцией
        function animateCards() {
          // Более плавная интерполяция (меньший коэффициент = плавнее)
          const lerpFactor = isMouseInside ? 0.03 : 0.05 // Плавнее при движении, чуть быстрее при возврате

          cardX += (targetX - cardX) * lerpFactor
          cardY += (targetY - cardY) * lerpFactor

          // Максимальный угол наклона (в градусах)
          const maxRotateX = 16
          const maxRotateY = 16

          // Вычисляем углы наклона на основе позиции курсора
          const rotateX = -cardY * maxRotateX
          const rotateY = cardX * maxRotateY

          // Главная карточка - на заднем плане, меньше наклон
          const mainRotateX = rotateX * 0.5
          const mainRotateY = rotateY * 0.5
          mainCard.style.transform = `translateZ(-50px) rotateX(${mainRotateX}deg) rotateY(${mainRotateY}deg)`

          // Дополнительные карточки - ближе, больше наклон
          const sideRotateX = rotateX * 1.2
          const sideRotateY = rotateY * 1.2

          // Левая карточка
          leftCard.style.transform = `translateZ(80px) translateY(40%) rotateX(${sideRotateX}deg) rotateY(${sideRotateY}deg)`

          // Правая карточка (сохраняем translateY(-50%))
          rightCard.style.transform = `translateY(-70%) translateZ(80px) rotateX(${sideRotateX}deg) rotateY(${sideRotateY}deg)`

          requestAnimationFrame(animateCards)
        }

        // Запуск анимации
        animateCards()
      })

      document.addEventListener('DOMContentLoaded', function () {
        const headerBurger = document.querySelector('.header-burger')
        const headerMenu = document.querySelector('.header-menu')
        const mobileMenu = document.querySelector('.mobile-menu')

        headerBurger.addEventListener('click', function () {
          headerBurger.classList.toggle('active')
          headerMenu.classList.toggle('active')
          mobileMenu.classList.toggle('active')
        })

        // Анимация SVG графика
        function animateChart() {
          const chartLine = document.querySelector('.chart-line-path')
          const chartCircle = document.querySelector('.chart-circle')
          const gradient = document.querySelector('#paint1_linear_52_16')

          if (!chartLine || !chartCircle || !gradient) return

          const pathLength = chartLine.getTotalLength()

          // Устанавливаем правильный stroke-dasharray на основе реальной длины
          chartLine.style.strokeDasharray = pathLength
          chartLine.style.strokeDashoffset = pathLength // Начинаем с полной длины (линия невидима)
          chartLine.style.setProperty('--path-length', pathLength)

          const duration = 3000 // 3 секунды
          const circleDelay = 500 // Задержка для кружочка
          const startTime = performance.now()

          // Получаем стопы градиента
          const gradientStops = gradient.querySelectorAll('stop')
          const startStop = gradientStops[0] // Первый стоп (прозрачный)
          const middleStartStop = gradientStops[1] // Начало зеленого
          const middleEndStop = gradientStops[2] // Конец зеленого
          const endStop = gradientStops[3] // Конечный стоп (прозрачный)

          function animate() {
            const elapsed = performance.now() - startTime
            let progress = Math.min(elapsed / duration, 1) // Один проход

            // Применяем easing для плавности (ease-in-out)
            progress =
              progress < 0.5
                ? 2 * progress * progress
                : 1 - Math.pow(-2 * progress + 2, 2) / 2

            // Анимация линии через stroke-dashoffset (рисуется от начала)
            chartLine.style.strokeDashoffset = pathLength * (1 - progress)

            // Анимация градиента - градиент появляется по мере прорисовки траектории
            // Градиент должен появляться синхронно с прорисовкой линии
            const gradientOpacity = progress // Градиент появляется вместе с линией

            if (progress <= 0.111506) {
              // До начала зеленой части - градиент полностью прозрачный
              startStop.setAttribute('stop-opacity', '0')
              middleStartStop.setAttribute('stop-opacity', '0')
              middleEndStop.setAttribute('stop-opacity', '0')
              endStop.setAttribute('stop-opacity', '0')
            } else if (progress <= 0.858819) {
              // В зеленой части - градиент появляется по мере прорисовки
              // Используем общий прогресс для плавного появления
              const localProgress =
                (progress - 0.111506) / (0.858819 - 0.111506)
              startStop.setAttribute('stop-opacity', '0')
              middleStartStop.setAttribute('stop-opacity', localProgress)
              middleEndStop.setAttribute('stop-opacity', localProgress)
              endStop.setAttribute('stop-opacity', '0')
            } else {
              // После зеленой части - градиент полностью виден
              startStop.setAttribute('stop-opacity', '0')
              middleStartStop.setAttribute('stop-opacity', '1')
              middleEndStop.setAttribute('stop-opacity', '1')
              endStop.setAttribute('stop-opacity', '0')
            }

            // Анимация кружочка с задержкой (останавливается на 70% пути - на высоком значении)
            const circleStopProgress = 0.7 // Останавливаем на 70% пути (на пике)
            if (elapsed >= circleDelay) {
              const circleElapsed = elapsed - circleDelay
              const maxCircleProgress = circleStopProgress
              let rawProgress = Math.min(
                circleElapsed / (duration - circleDelay),
                1
              )

              // Применяем ease-out для плавного замедления под конец
              // Используем кубическую функцию ease-out: 1 - (1-t)^3
              const easedProgress = 1 - Math.pow(1 - rawProgress, 3)

              // Применяем eased прогресс к максимальному прогрессу
              let circleProgress = easedProgress * maxCircleProgress

              const point = chartLine.getPointAtLength(
                circleProgress * pathLength
              )
              chartCircle.setAttribute('cx', point.x)
              chartCircle.setAttribute('cy', point.y)
              chartCircle.style.opacity = '1'
            } else {
              chartCircle.style.opacity = '0'
            }

            // Продолжаем анимацию только если не завершена
            if (progress < 1) {
              requestAnimationFrame(animate)
            } else {
              // Устанавливаем финальные значения
              const circleStopProgress = 0.7 // Останавливаем на 70% пути (на пике)
              const finalPoint = chartLine.getPointAtLength(
                circleStopProgress * pathLength
              )
              chartCircle.setAttribute('cx', finalPoint.x)
              chartCircle.setAttribute('cy', finalPoint.y)
              chartCircle.style.opacity = '1'
              // Финальное состояние градиента
              middleStartStop.setAttribute('offset', '0.111506')
              middleEndStop.setAttribute('offset', '0.858819')
            }
          }

          animate()
        }

        // Запускаем анимацию после небольшой задержки
        setTimeout(animateChart, 100)
      })
    </script>
  </body>
</html>
